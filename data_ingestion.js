var geometry = /* color: #00ffff */ee.Geometry.MultiPolygon(
        [[[[-74.5331097388347, -5.9027252366419205],
           [-74.1760540747722, -6.214086420365306],
           [-73.8409710669597, -6.164936136168247],
           [-73.5278607153972, -5.383405469790127],
           [-73.11190913426015, -4.388649375563811],
           [-71.54635737644765, -4.563894378044291],
           [-69.85446284519765, -4.640550711735484],
           [-69.84347651707265, -3.670828696108607],
           [-71.33488836309033, -3.3109781978195447],
           [-73.01030340215283, -2.8008420892017605],
           [-73.68596258184033, -2.7788954759687607],
           [-73.79788983653509, -3.3359676890505976],
           [-73.88578046153509, -3.670424079544004],
           [-73.80338300059759, -4.306084713487087],
           [-74.02860272716009, -4.262262193773503],
           [-74.06705487559759, -3.796498697704769],
           [-74.81961835216009, -3.3469353394096113],
           [-75.23160565684759, -3.6868696173132585],
           [-75.07230389903509, -3.8951529817247814],
           [-74.47354901622259, -3.873230796657779],
           [-74.44607219966088, -4.334537298167052],
           [-74.73720989497338, -4.422171420200803],
           [-74.57241497309838, -4.717858872564964],
           [-74.22085247309838, -4.778076323054813],
           [-74.76467571528588, -5.56586511344402]]],
         [[[-73.0499554419597, -5.990142929746676],
           [-72.7478314185222, -5.569320493049159],
           [-72.8357220435222, -5.038767020836019],
           [-73.1213665747722, -5.104426917766058],
           [-73.3960247778972, -5.935508498574297]]]]),
    geometry2 = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-75.23226891256496, -10.86611380504286],
          [-74.58954131409553, -11.663475005016721],
          [-74.27641629621803, -12.200948943869314],
          [-73.57874757418472, -12.930149752613799],
          [-73.80947251139571, -12.098911860146403],
          [-74.02371629286137, -11.302783913136448],
          [-73.63096500704148, -11.536995971356484],
          [-73.02394186883976, -11.878601586197602],
          [-72.3949401325504, -12.251949457910342],
          [-72.01207300358425, -12.461931633529387],
          [-71.01780864971926, -9.30121373749317],
          [-72.34911881842265, -8.856600380687976],
          [-73.76848562046558, -7.508802858238432],
          [-74.78811212614761, -7.7368366487098115],
          [-75.32096769226905, -8.291681213775307],
          [-76.46473941494202, -9.026543862863347]]]),
    geometry3 = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-77.09749347030942, -6.798973628088032],
          [-77.16890460312192, -7.256931266653196],
          [-76.65804034530942, -8.258409752891607],
          [-76.33943682968442, -8.106166935117042],
          [-75.96590167343442, -7.610985171565913],
          [-75.32869464218442, -7.207886141494287],
          [-75.15329119648618, -6.676505014351071],
          [-74.64792010273618, -5.693503255952669],
          [-75.29062029804868, -5.149480392260178],
          [-76.10360857929868, -4.749975655566555],
          [-77.58676287617368, -4.361193916831673],
          [-78.29538104023618, -4.394056747392274],
          [-78.53708025898618, -4.892292568349708],
          [-78.32284686054868, -5.280770557504933],
          [-77.87260907116024, -5.618401611903119]]]),
    geometry4 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-69.37209956527903, -14.009866460332363],
          [-68.21853511215403, -12.212358862733957],
          [-70.37185542465403, -9.352702600807644],
          [-70.99807612777903, -9.265969559373323],
          [-71.99783198715403, -12.491391077485986]]]),
    geometry5 = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-78.71061871733042, -11.267850606331937],
          [-77.4720705219612, -10.115435241124056],
          [-76.96026202073062, -9.790053969357256],
          [-77.40646819064938, -8.491599062369746],
          [-78.57554977062586, -7.340985814535347],
          [-79.06518115075187, -7.4937236998456696],
          [-79.37762389712043, -8.04810245012129],
          [-79.4036169638506, -8.972576996728424],
          [-79.40430727486006, -9.629081179730868],
          [-79.56394852607787, -9.75384284842767],
          [-79.24478020165407, -10.384249640081496],
          [-79.1390320568816, -10.955886584066139]]]),
    geometry6 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-81.34473959890772, -3.743850664434975],
          [-79.6453626837328, -12.378291088305751],
          [-70.57127324545326, -18.526465792094584],
          [-69.03318730795326, -18.359713027526112],
          [-68.02244512045326, -12.431185331116218],
          [-69.25291387045326, -2.3339214788857783],
          [-75.18553105795326, 0.6097572310261093],
          [-79.49217168295326, -2.992385588096273]]]),
    pixlatlon = ee.Image("users/glarrea/pixlatlon"),
    limits = ee.FeatureCollection("users/glarrea/UntitledFolder/Perulimit"),
    geometry7 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-76.54665936358862, -11.36524337164761],
          [-68.41677655108862, -16.776576302429515],
          [-68.76833905108862, -2.474902746006816],
          [-74.92068280108862, 0.9080783155536591],
          [-79.66677655108862, -2.782195901867546]]]),
    geometry8 = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-72.23219714908804, -10.702176599889228],
          [-72.23219714908804, -13.665741090338994],
          [-68.52980457096304, -13.665741090338994],
          [-68.52980457096304, -10.702176599889228]]], null, false),
    image = ee.Image("users/glarrea/data_to_predict_v3"),
    landform = ee.Image("CSP/ERGo/1_0/Global/SRTM_landforms"),
    nac_road = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.MultiPoint(),
    vec_road = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.MultiLineString(
        [[[-69.84009229006797, -11.488890337960816],
          [-69.8469587451461, -11.469375927519865]],
         [[-69.90569764623123, -11.480072821205049],
          [-69.90672761449295, -11.510015657523885]],
         [[-70.03828288655342, -12.793888349051981],
          [-70.03278972249092, -12.599630516293939]],
         [[-69.85426189045967, -12.768442337270566],
          [-69.86250581801308, -12.6552272700118]],
         [[-70.72702549050653, -12.32547082528305],
          [-70.81560276101435, -12.372423936130238]],
         [[-70.89819101063445, -12.157153180856056],
          [-70.78695443836882, -12.238361586791152]],
         [[-70.79858711693836, -11.999719976890056],
          [-70.67155769799305, -12.100447303938383]],
         [[-70.80065180902743, -11.854277534665522],
          [-70.6619494164493, -11.912735401007385]],
         [[-70.73130061273837, -12.09541881141938],
          [-70.68804194574618, -12.035657368673899]],
         [[-70.83498408441805, -12.026166875814745],
          [-70.78142573480868, -12.01474985199087],
          [-70.79790522699618, -11.96034444907626]],
         [[-70.7882921898868, -11.819914632543494],
          [-70.77249934320712, -11.866956608835084],
          [-70.87892939691805, -11.867628578351031]],
         [[-70.65759946482976, -11.87618118582626],
          [-70.6926183857282, -11.92925986770499]],
         [[-70.86487257124963, -12.148643494349045],
          [-70.90195142867151, -12.181533593530343]],
         [[-70.79620802046838, -12.184218319813418],
          [-70.84976637007776, -12.230525567909632]],
         [[-69.759142826723, -11.446596578916434],
          [-69.70146460406674, -11.364480134013444]],
         [[-69.59709448687924, -11.703560463016005],
          [-70.00770850055112, -11.544835750835379]],
         [[-69.82231421344174, -11.610757837962758],
          [-69.6767453657855, -11.579816752619694]],
         [[-69.68086523883237, -11.575780706256566],
          [-69.594347904848, -11.434482532120489]],
         [[-69.81544775836362, -11.451980433284833],
          [-69.7536496626605, -11.341591000287764]]]),
    to_predict_v6 = ee.Image("users/glarrea/data_to_predict_v6"),
    image3 = ee.Image("users/glarrea/data_pre_lux_100mpx"),
    geometry9 = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-71.885675372736, -10.730295346479796],
          [-71.885675372736, -13.586782459662203],
          [-68.666681232111, -13.586782459662203],
          [-68.666681232111, -10.730295346479796]]], null, false),
    imageVisParam = {"opacity":1,"bands":["distance_dep_proj"],"min":0,"max":12000,"gamma":1},
    new_vill = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Point([-72.22035394096493, -12.716765154219159]),
    ROADS = ee.FeatureCollection("users/glarrea/database_roads/ROADS"),
    exc = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-71.70273022860894, -13.185913699497526],
          [-71.15341382235894, -12.245519139093053],
          [-71.02981763095269, -12.197201086136742],
          [-71.50137334521811, -11.891995139090552],
          [-72.06167607959311, -11.870493215633873],
          [-72.91036992724936, -12.217002870258021],
          [-72.97903447803061, -13.130756487548776],
          [-71.41789272424387, -14.05500848962316],
          [-69.61648262467212, -14.137123403048117],
          [-68.60427974665056, -12.49070826441885],
          [-69.54525672206995, -10.890672510208622],
          [-70.7400199056637, -10.839422928846433],
          [-71.88241941443437, -11.687923532838546],
          [-70.72336179724687, -12.225320223983003],
          [-70.87991697302812, -12.313887127333722],
          [-71.46768552771562, -13.401021881293202],
          [-71.71213132849687, -13.401021881293202],
          [-71.80002195349687, -13.22194510517229]]]),
    image4 = ee.Image("users/glarrea/database_roads/rasters/data_pre_real_30mpx"),
    image2 = ee.Image("users/glarrea/database_roads/rasters/data_pre_real_100mpx"),
    new_vec_2 = /* color: #d63000 */ee.Geometry.MultiLineString(
        [[[-71.11983378402105, -12.476179952745731],
          [-71.11640055648199, -12.471822114611127]],
         [[-71.16322848659924, -12.541979383736031],
          [-71.13713595730236, -12.544660410576531],
          [-71.12614962917736, -12.56878839531946],
          [-71.09319064480236, -12.563426816541861],
          [-71.06709811550549, -12.587553039860337]],
         [[-71.01628634792736, -12.399845162035218],
          [-70.96822116238049, -12.425327780387459],
          [-70.95586154323986, -12.457512781435032]],
         [[-70.73888156277111, -12.330090530097891],
          [-70.78008029323986, -12.35155547597773],
          [-70.78832003933361, -12.399845162035218],
          [-70.81441256863049, -12.423986652154202]],
         [[-70.34634596402962, -12.113964404889888],
          [-70.24746901090462, -12.11127896991534],
          [-70.22549635465462, -12.079051645096666],
          [-70.17743116910775, -12.103222502957795]],
         [[-70.29965406949837, -12.028017116961855],
          [-70.29278761442025, -11.987719855222025],
          [-70.26944166715462, -11.962195141859555]],
         [[-70.29690748746712, -11.989063194355225],
          [-70.30789381559212, -11.942042350213502]],
         [[-70.34454685808794, -11.63236787949493],
          [-70.26901585222856, -11.596048199109658]],
         [[-70.35004002215044, -11.587976516879017],
          [-70.42969090105669, -11.567796291498224],
          [-70.45578343035356, -11.551651063518497]],
         [[-70.36514622332231, -11.501864095209779],
          [-70.34317356707231, -11.496481192226886],
          [-70.31296116472856, -11.478986047394306]],
         [[-70.37063938738481, -11.46552750535585],
          [-70.40222508074419, -11.461489817671065],
          [-70.46127659441606, -11.476294390319607]],
         [[-70.30518430328549, -11.27588301150608],
          [-70.25711911773861, -11.281270090791942],
          [-70.21729367828549, -11.26106802287797],
          [-70.18433469391049, -11.265108550010158]],
         [[-70.25986569976986, -11.200453318371526],
          [-70.26123899078549, -11.166772990510031],
          [-70.24338620758236, -11.146562916895864],
          [-70.21866696930111, -11.120961474073713]],
         [[-69.97422116851986, -11.507303830365814],
          [-69.89869016266049, -11.437319429898588],
          [-69.88633054351986, -11.413090025044]],
         [[-70.02503293609799, -11.565162408143596],
          [-69.98108762359799, -11.578616180187776],
          [-69.92340940094174, -11.582652185626733],
          [-69.88083737945736, -11.569198607671984]],
         [[-70.00898768882638, -11.947439739198828],
          [-69.97877528648263, -11.866815204795943],
          [-69.93208339195138, -11.877566523845873]],
         [[-70.11514244686657, -11.912505378563514],
          [-70.11514244686657, -11.968935568160326],
          [-70.08493004452282, -11.993116332223666]],
         [[-70.32546028707769, -11.787447974994164],
          [-70.22246346090581, -11.729635653971064]]]),
    v2 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.LineString(
        [[-71.26258578475209, -12.684086867150729],
         [-71.26104083235951, -12.683919395017487]]),
    geometry10 = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-71.58858882009592, -11.943395305081218],
          [-71.58858882009592, -12.954497059476275],
          [-70.18508540212717, -12.954497059476275],
          [-70.18508540212717, -11.943395305081218]]], null, false);
var geometry_to_export = 
    /* color: #d63000 */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-73.26980077062, -10.247536592753908],
          [-73.26980077062, -13.995548366263108],
          [-68.424830067495, -13.995548366263108],
          [-68.424830067495, -10.247536592753908]]], null, false);
/**
 * This script is used to process raw data and produce a database multiband image.
 * shapefiles can be used to generate the images, or new geometries can be inserted to
 * create new databases.
 */

var landform = landform.select([0],['landform']) 
var deforestation = ee.Image("UMD/hansen/global_forest_change_2017_v1_5"),
    srtm = ee.Image("USGS/SRTMGL1_003"), 
    access = ee.Image("Oxford/MAP/accessibility_to_cities_2015_v1_0"),
    carbondensity = ee.Image("users/glarrea/UntitledFolder/CarbonDensity"),
    limits = ee.FeatureCollection("users/glarrea/UntitledFolder/Perulimit"),
    villages = ee.FeatureCollection("users/glarrea/UntitledFolder/villages"),
    parks = ee.FeatureCollection("users/glarrea/UntitledFolder/protected"),
    buffer = ee.FeatureCollection("users/glarrea/UntitledFolder/buffer");
var slope = ee.Terrain.slope(srtm).clip(limits);
var def_proj = ee.Projection({crs:'EPSG:32719'}).atScale(100)

var carbondensity = carbondensity.rename('carbon_density'); 
var srtm = srtm.rename('altitude');
var limitsgeo = limits.geometry(); // Converting feature collection to geometry
var coord = ee.Image.pixelLonLat().reproject(def_proj)
var ROADS = ee.FeatureCollection("users/glarrea/database_roads/ROADS");


landform = landform.select([0],['landform'])
var def_proj = ee.Projection({crs:'EPSG:32719'}).atScale(100)


///////////////////////////////////////////////////
///////////////// Data preparation  /////////////// 
///////////////////////////////////////////////////



//uncomment to add new geometries to the roads shapefile{
// var vec_road = new_vec_2 // this can be replaced with geometries (GEE objects) or geometries from feature collections
// var proj_vec = ee.FeatureCollection(ee.Feature(vec_road, {"CLASE": "THIRD", "RODADURA": "Proyectado"}))
// ROADS = ROADS.merge(proj_vec).map(function(x){
//   return x.set({"dummy": 1})
// })

// var dep_road = new_dep_2 // this can be replaced with geometries (GEE objects) or geometries from feature collections
// var proj_dep = ee.FeatureCollection(ee.Feature(dep_road, {"CLASE": "SECOND", "RODADURA": "Proyectado"}))
// ROADS = ROADS.merge(proj_dep).map(function(x){
//   return x.set({"dummy": 1})
// })

// var nac_road = new_nac_2 // this can be replaced with geometries (GEE objects) or geometries from feature collections
// var proj_nac = ee.FeatureCollection(ee.Feature(nac_road, {"CLASE": "FIRST", "RODADURA": "Proyectado"}))
// ROADS = ROADS.merge(proj_nac).map(function(x){
//   return x.set({"dummy": 1})
// })

 
// Export.table.toAsset({collection:ROADS, description: "ROADS_V3", assetId: "ROADS_V3"}) //uncomment to export shapefile of the new version

//}
ROADS = ROADS.map(function(x){
  return x.set({"dummy": 1})
})
var ROADS_real = ROADS.filterMetadata('RODADURA',"not_equals","Proyectado") // selecting only existing roads

//creating raster layers from shapes (featurecollections)

var ROADS_real_raw = ROADS_real.reduceToImage({ //considers only existing roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})
Map.addLayer(ROADS_real_raw.reproject(def_proj))
var ROADS_all_raw = ROADS.reduceToImage({ //considers existing and projected roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var third_real_raw = ROADS_real.filterMetadata('CLASE',"equals","THIRD").reduceToImage({ //considers only existing roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var third_all_raw = ROADS.filterMetadata('CLASE',"equals","THIRD").reduceToImage({//considers existing and projected roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var second_real_raw = ROADS_real.filterMetadata('CLASE',"equals","SECOND").reduceToImage({//considers only existing roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var second_all_raw = ROADS.filterMetadata('CLASE',"equals","SECOND").reduceToImage({//considers existing and projected roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var first_real_raw = ROADS_real.filterMetadata('CLASE',"equals","FIRST").reduceToImage({//considers only existing roads
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

var first_all_raw = ROADS.filterMetadata('CLASE',"equals","FIRST") //considers existing and projected roads
  // .filterBounds(exc) //comment or uncomment to exclude roads from a particular area
  .reduceToImage({
  properties: ["dummy"],
  reducer: ee.Reducer.first()
})

buffer = buffer.map(function(x){//adding property 'dummy'
  return x.set('dummy',1);
});

var bufferRaw = buffer.reduceToImage({
  properties: ['dummy'],
  reducer: ee.Reducer.first()
}).rename('buffer').unmask(0); // 1: inside the buffer zone, 0: outside the buffer zone

parks = parks.map(function(x){//adding property 'dummy'
  return x.set('dummy',1);
});

var parksRaw = parks.reduceToImage({
  properties: ['dummy'],
  reducer: ee.Reducer.first()
}).rename('parks').unmask(0); //1: inside the park, 0: outside the park

var villagesRaw = villages.reduceToImage({
  properties: ['TOT_POB'],
  reducer: ee.Reducer.first()
});



//// CREATING DISTANCES RASTER////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//The distance from each pixel to infraestructure is calculated

var pixel_size = ee.Image.pixelArea().sqrt(); //not yet projected

//distances to real roads
var dist_allroadpix = ROADS_real_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt(); //calculating distance, not projected yet
var dist_allroad = dist_allroadpix.multiply(pixel_size).rename('distance_any').toInt32(); //reprojecting and calculating distance in meters

var dist_thirdroadpix = third_real_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt(); 
var dist_thirdroad = dist_thirdroadpix.multiply(pixel_size).rename('distance_third').toInt32(); 

var dist_secroadpix = second_real_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_secroad = dist_secroadpix.multiply(pixel_size).rename('distance_second').toInt32();

var dist_firstroadpix = first_real_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_firstroad = dist_firstroadpix.multiply(pixel_size).rename('distance_first').toInt32();

//distances to projected roads
var dist_allroadPropix = ROADS_all_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt(); //calculating distance, not projected yet
var dist_allroad_proj = dist_allroadPropix.multiply(pixel_size).rename('distance_any').toInt32(); //reprojecting and calculating distance in meters

var dist_thirdroadPropix = third_all_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_thirdroad_proj = dist_thirdroadPropix.multiply(pixel_size).rename('distance_third').toInt32();

var dist_secroadPropix = second_all_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_secroad_proj = dist_secroadPropix.multiply(pixel_size).rename('distance_second').toInt32();

var dist_firstroadPropix = first_all_raw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_firstroad_proj = dist_firstroadPropix.multiply(pixel_size).rename('distance_first').toInt32();

var villagesnew = villages.merge(ee.FeatureCollection(ee.Feature(new_vill, {TOT_POB:99})))
var villagesnewRaw = villagesnew.reduceToImage({
  properties: ['TOT_POB'],
  reducer: ee.Reducer.first()
});

var dist_villagesPropix = villagesnewRaw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_villages_proj = dist_villagesPropix.multiply(pixel_size).rename('distance_villages').toInt32();

//distances to buffer zones, protected parks, and villages
var dist_bufferpix = bufferRaw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_buffer = dist_bufferpix.multiply(pixel_size).rename('distance_buffer').toInt32();

var dist_parkspix = parksRaw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_parks = dist_parkspix.multiply(pixel_size).rename('distance_parks').toInt32();

var dist_villagespix = villagesRaw.fastDistanceTransform(1000, 'pixels', 'squared_euclidean').sqrt();
var dist_villages = dist_villagespix.multiply(pixel_size).rename('distance_villages').toInt32();


//CREATING FINALS RASTER IMAGES////////////////////////////////////////////////////////////////////
// Exporting image for training
var data_pre_real = ee.Image.cat(dist_allroad, dist_secroad, dist_thirdroad, dist_firstroad, dist_buffer,
                            dist_parks, dist_villages, carbondensity, srtm, slope, landform)
Map.addLayer(data_pre_real.reproject(def_proj))
// Exporting image for prediction                           
var data_pre_proj = ee.Image.cat(dist_allroad_proj,dist_secroad_proj, dist_thirdroad_proj, dist_firstroad_proj, dist_buffer,
                            dist_parks, dist_villages_proj, carbondensity, srtm, slope, landform)
                            
                            
 Export.image.toAsset({image:data_pre_real, 
 description:'database', 
 assetId:'database', 
 region:geometry_to_export,                                            //uncomment for exporting
 scale:100, 
 maxPixels:1e13,
 crs: 'EPSG:32719'
 })                            




//Exporting to cloud storage
// Export.image.toCloudStorage({
//   image: data_pre_real,
//   bucket:'<your_bucket>',
//   description: '<your_file_name>',
//   scale: 100,
//   fileFormat: 'TFRecord',
//   region: geometry8, //insert the geometry for exporting here
//   crs: 'EPSG:32719'
//   formatOptions: {
//     'patchDimensions': [256, 256],
//     maxFileSize: 104857600,
//     compressed: true,
//   },
// });






